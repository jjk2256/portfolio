<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Julia Kwon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="green-circle-favicon.svg">
    <link rel="alternate icon" href="favicon.ico" type="image/x-icon">
    <script>
        // Handle GitHub Pages path issues
        document.addEventListener('DOMContentLoaded', function() {
            if (window.location.hostname === 'jjk2256.github.io') {
                document.querySelectorAll('a[href]').forEach(link => {
                    const href = link.getAttribute('href');
                    // Only update relative internal links that don't already have /portfolio/ and aren't external links
                    if (href && !href.startsWith('http') && !href.startsWith('/portfolio/') && !href.startsWith('#') && !href.startsWith('mailto:')) {
                        // If it's a root-relative link (starts with /)
                        if (href.startsWith('/')) {
                            link.href = '/portfolio' + href;
                        } 
                        // If it's a relative link (doesn't start with /) and not just a hash or empty
                        else if (href !== '#' && href !== '' && !href.startsWith('#')) {
                            link.href = '/portfolio/' + href;
                        }
                        console.log('Updated link:', href, 'to', link.href);
                    }
                });
            }
        });
    </script>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor-dot" id="cursor-dot"></div>
    
    <!-- Vertical Grid Lines -->
    <div class="grid-lines" id="grid-lines">
        <!-- Grid lines will be created by JavaScript -->
    </div>

    <header>
        <a href="intro.html" class="logo" id="logo-link">Julia Kwon</a>
        <div class="nav-container">
            <div class="nav-left">
                <div class="nav-links">
                    <a href="index.html" id="works-link" data-section="works">Works</a>
                    <a href="#projects" id="projects-link" data-section="projects">Projects</a>
                </div>
            </div>
            <div class="nav-right">
                <div class="nav-links">
                    <a href="info.html">Info</a>
                    <a href="https://publuu.com/flip-book/906627/1984875" target="_blank">Design</a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Gallery View (Home) -->
    <div class="gallery-container" id="gallery">
        <!-- Images will be added dynamically via JavaScript -->
    </div>
    
    <!-- Projects Index View -->
    <div class="project-container" id="projects-page" style="display: none;">
        <div class="projects-index">
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">Pre_Capstone</div>
                <div class="project-category">Narrative</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024-2025</div>
                <div class="project-title">CAPSTONE</div>
                <div class="project-category">Prototyping</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">CAPSTONE_make</div>
                <div class="project-category">Prototyping</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2025</div>
                <div class="project-title">CAPSTONE_grow</div>
                <div class="project-category">Prototyping</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2025</div>
                <div class="project-title">CAPSTONE_test</div>
                <div class="project-category">Prototyping</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">DataViz</div>
                <div class="project-category">Visualization</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2025</div>
                <div class="project-title">EchoPULSE</div>
                <div class="project-category">Interactive</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">GIS</div>
                <div class="project-category">Mapping</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2025</div>
                <div class="project-title">LumenBeat</div>
                <div class="project-category">Installation</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">MetaTool</div>
                <div class="project-category">Medium</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">Photography</div>
                <div class="project-category">Images</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">RubeGoldberg</div>
                <div class="project-category">Installation</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">Zine</div>
                <div class="project-category">Collaboration</div>
            </div>
            <div class="project-index-row">
                <div class="project-year">2024</div>
                <div class="project-title">Unhampering</div>
                <div class="project-category">Speculative Design</div>
            </div>
        </div>
    </div>
    
    <!-- Project Detail View -->
    <div class="project-container" id="project-detail" style="display: none;">
        <div class="project-header">
            <h1 class="project-title" id="project-title-text">Project Title <span id="project-year">2023</span></h1>
            <div class="project-info">
                <h2>About the Project</h2>
                <p id="project-description">Project description will appear here.</p>
            </div>
        </div>
        
        <div id="project-images-container">
            <!-- Hero image/video and detail images will be added dynamically -->
        </div>
        
        <div id="project-videos-container">
            <!-- Additional videos will be added dynamically -->
        </div>
        
        <a href="/portfolio/index.html" class="back-to-gallery" id="back-button">Back to Gallery</a>
    </div>

    <script src="main.js"></script>
    <script>
        // Ensure proper navigation handling
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're on GitHub Pages and update logo URL
            if (window.location.hostname === 'jjk2256.github.io') {
                document.querySelector('.logo').href = '/portfolio/intro.html';
            }
            
            // Check if we're on GitHub Pages and update relative URLs
            const isGitHubPages = window.location.hostname === 'jjk2256.github.io';
            
            // If on GitHub Pages, explicitly set the Works link
            if (isGitHubPages) {
                document.querySelector('#works-link').href = '/portfolio/index.html';
                document.querySelector('#back-button').href = '/portfolio/index.html';
            }
            
            // Set initial state based on URL
            const hash = window.location.hash;
            if (hash === '#projects') {
                showProjectsPage();
            } else if (hash.startsWith('#project-')) {
                const projectName = decodeURIComponent(hash.replace('#project-', ''));
                const projectData = images.find(img => 
                    img.title.toLowerCase() === projectName.toLowerCase().replace(/-/g, ' ')
                );
                if (projectData) {
                    showProjectDetail(projectData);
                } else {
                    showGallery();
                }
            } else {
                showGallery();
            }

            // Handle all navigation links
            document.querySelectorAll('a[data-section]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    
                    // Update active states
                    document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Handle navigation
                    if (section === 'works') {
                        showGallery();
                        // Use getNavigationPath for consistent URL handling
                        const navigationPath = getNavigationPath(window.location.pathname);
                        history.pushState({}, '', navigationPath);
                    } else if (section === 'projects') {
                        showProjectsPage();
                        const basePath = window.location.pathname;
                        history.pushState({}, '', basePath + '#projects');
                    }
                });
            });

            // Handle logo click
            document.getElementById('logo-link').addEventListener('click', function(e) {
                // Don't prevent default - allow normal navigation to intro.html
                // No need to call showGallery() or update history
            });

            // Handle back button
            document.getElementById('back-button').addEventListener('click', function(e) {
                e.preventDefault();
                const projectsHash = window.location.hash === '#projects';
                showGallery();
                document.getElementById('works-link').classList.add('active');
                document.getElementById('projects-link').classList.remove('active');
                
                // Use getNavigationPath for consistent URL handling
                const navigationPath = getNavigationPath(window.location.pathname);
                history.pushState({}, '', projectsHash ? navigationPath + '#projects' : navigationPath);
            });

            // Initialize project row click handlers
            const projectRows = document.querySelectorAll('.project-index-row');
            projectRows.forEach(row => {
                const projectTitle = row.querySelector('.project-title').textContent;
                row.addEventListener('click', function() {
                    const projectData = images.find(img => img.title === projectTitle);
                    if (projectData) {
                        showProjectDetail(projectData);
                        const basePath = window.location.pathname;
                        
                        // Use the getNavigationPath function for correct path handling
                        const navigationPath = getNavigationPath(basePath);
                        history.pushState(
                            {project: projectTitle}, 
                            projectTitle,
                            navigationPath + '#project-' + encodeURIComponent(projectTitle.toLowerCase())
                        );
                    }
                });
            });
        });

        // Handle browser back/forward navigation
        window.addEventListener('popstate', function(e) {
            const hash = window.location.hash;
            if (hash === '#projects') {
                showProjectsPage();
                document.getElementById('projects-link').classList.add('active');
                document.getElementById('works-link').classList.remove('active');
            } else if (hash.startsWith('#project-')) {
                const projectName = decodeURIComponent(hash.replace('#project-', ''));
                const projectData = images.find(img => 
                    img.title.toLowerCase() === projectName.toLowerCase().replace(/-/g, ' ')
                );
                if (projectData) {
                    showProjectDetail(projectData);
                    document.getElementById('works-link').classList.add('active');
                    document.getElementById('projects-link').classList.remove('active');
                } else {
                    showGallery();
                    document.getElementById('works-link').classList.add('active');
                    document.getElementById('projects-link').classList.remove('active');
                }
            } else {
                showGallery();
                document.getElementById('works-link').classList.add('active');
                document.getElementById('projects-link').classList.remove('active');
            }
        });
    </script>
    
    <!-- GitHub Pages path handling -->
    <script>
        // Global function to fix all links when on GitHub Pages
        function fixGitHubPagesLinks() {
            if (window.location.hostname === 'jjk2256.github.io') {
                console.log('Fixing links for GitHub Pages');
                
                document.querySelectorAll('a[href]').forEach(link => {
                    const href = link.getAttribute('href');
                    
                    // Skip external links, hash links, mailto links and links that already use the correct format
                    if (href && !href.startsWith('http') && !href.startsWith('#') && 
                        !href.startsWith('mailto:')) {
                        
                        // For relative or absolute internal links, use getNavigationPath
                        if ((href.startsWith('/') || !href.includes('://')) && 
                            !href.startsWith('/portfolio/') && 
                            href !== '' && 
                            !href.startsWith('#')) {
                            
                            // Use getNavigationPath to ensure consistent path formatting
                            link.href = getNavigationPath(href);
                            console.log('Updated link:', href, 'to', link.href);
                        }
                    }
                });
            }
        }
        
        // Run once on page load
        document.addEventListener('DOMContentLoaded', fixGitHubPagesLinks);
        
        // Run whenever content might be dynamically added or changed
        window.addEventListener('load', fixGitHubPagesLinks);
        document.addEventListener('DOMNodeInserted', function() {
            // Use debounce/throttle to avoid running too often
            if (window.fixLinksTimeout) {
                clearTimeout(window.fixLinksTimeout);
            }
            window.fixLinksTimeout = setTimeout(fixGitHubPagesLinks, 500);
        });
    </script>
    
    <!-- Mobile footer navigation -->
    <div class="mobile-footer-nav" id="mobile-footer-nav" style="display: none;">
        <a href="index.html" id="mobile-works-link">Works</a>
        <a href="#projects" id="mobile-projects-link">Projects</a>
        <a href="info.html" id="mobile-info-link">Info</a>
        <a href="https://issuu.com/jisun.kwon/docs/issuu_portfolio" target="_blank" id="mobile-design-link">Design</a>
    </div>
    
    <script>
        // Initialize mobile navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're on mobile
            const isMobile = window.innerWidth <= 768 || 
                             ('ontouchstart' in window) || 
                             (navigator.maxTouchPoints > 0);
            
            if (isMobile) {
                const mobileNav = document.getElementById('mobile-footer-nav');
                if (mobileNav) mobileNav.style.display = 'flex';
                
                // Set active state based on current page
                const currentPath = window.location.pathname;
                const currentHash = window.location.hash;
                
                if (currentHash === '#projects') {
                    document.getElementById('mobile-projects-link').classList.add('active');
                } else if (currentPath.includes('info.html')) {
                    document.getElementById('mobile-info-link').classList.add('active');
                } else {
                    document.getElementById('mobile-works-link').classList.add('active');
                }
                
                // Handle mobile navigation link clicks
                document.getElementById('mobile-works-link').addEventListener('click', function(e) {
                    e.preventDefault();
                    // Use getNavigationPath for consistent URL handling
                    window.location.href = getNavigationPath('index.html');
                });
                
                document.getElementById('mobile-projects-link').addEventListener('click', function(e) {
                    e.preventDefault();
                    showProjectsPage();
                    const navigationPath = getNavigationPath(window.location.pathname);
                    history.pushState({}, '', navigationPath + '#projects');
                    
                    // Update active state
                    document.querySelectorAll('.mobile-footer-nav a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                });
                
                document.getElementById('mobile-info-link').addEventListener('click', function(e) {
                    // Let the default link behavior work
                });
            }
        });
        
        // Update mobile nav on resize
        window.addEventListener('resize', function() {
            const isMobile = window.innerWidth <= 768 || 
                             ('ontouchstart' in window) || 
                             (navigator.maxTouchPoints > 0);
            
            const mobileNav = document.getElementById('mobile-footer-nav');
            if (mobileNav) {
                mobileNav.style.display = isMobile ? 'flex' : 'none';
            }
        });
    </script>
</body>
</html>